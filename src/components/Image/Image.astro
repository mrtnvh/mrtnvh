---
import { getSrcSet } from "./cloudinary";

export interface Props {
	src: string;
	alt: string;
	width: string;
	height: string;
	class: string;
}

const { alt, src: source, width, height, loading } = Astro.props
const { src, srcSet } = getSrcSet({ src: source });
const { srcSet: srcSetWebp } = getSrcSet({ src: source, type: "webp" });
---

<picture>
	<source sizes="1px" srcset={srcSetWebp} type="image/webp" />
	<img
		src={src}
		srcset={srcSet}
		sizes="1px"
		alt={alt}
		class="image"
		loading={loading}
		width={width}
		height={height}
	/>
</picture>

<style>
img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}
</style>
