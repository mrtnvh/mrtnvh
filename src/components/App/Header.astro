---
import clsx from 'clsx';
import Brand from '../Brand.astro';
import Nav from './Nav.astro';

const currentPathname = Astro.request.url.pathname;
---

<header class={clsx({ header: true })}>
  <div class="container">
    <div class={clsx({ brand: true, 'brand-large': currentPathname === '/' })}>
      <Brand />
    </div>
    <div class="nav" data-testid="app-header-nav">
      <Nav />
    </div>
  </div>
</header>

<style>
  .header {
    padding-block: calc(var(--grid-gap-y) * 0.5);
    position: relative;
    z-index: 2;

    @media (min-width: 800px) {
      font-size: var(--font-size-base);
      padding-block: calc(var(--grid-gap-y) * 0.75);
    }

    @media (max-width: 799px) {
      &.header-absolute {
        position: absolute;
      }
    }
  }

  .container {
    display: flex;
    align-items: center;
    gap: var(--grid-gap-x);
  }

  .brand {
    &.brand-large {
      --brand-font-size: var(--font-size-5xl);

      @media (max-width: 799px) {
        margin: 0 auto;
      }
    }
  }

  .nav {
    position: fixed;
    inset-block-end: 0;
    inset-inline: 0;
    background-color: var(--grey-200);
    padding: calc(var(--grid-gap-y) * 0.5) calc(var(--grid-gap-x) * 1);
    z-index: var(--bottom-navigation-zindex);

    @media (min-width: 800px) {
      position: static;
      background-color: transparent;
      padding: 0;
      flex-grow: 1;
      display: flex;
      justify-content: end;
    }
  }
</style>
