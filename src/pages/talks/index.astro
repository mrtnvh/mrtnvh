---
import { orderBy } from 'lodash-es'
import { format } from "date-fns";
import BaseLayout from '../../layouts/Base.astro';
import List from "../../components/List/List.astro";

const dateNow = format(new Date(), "yyyyMMdd");
const allTalks = Astro.fetchContent('./*.md');
const allTalksOrdered = orderBy(allTalks, ['datePublished'], ['desc']);
const publishedTalks = allTalksOrdered.filter(({ datePublished }) => datePublished <= dateNow);
---

<BaseLayout { ...Astro.props }>
	<head>
		<title>Talks</title>
		<meta name="description" content="Sometimes, I'll get on a stage and talk about the stuff I like. Like rocking out, but with less noise. Afterwards, I'll post my slides here." />
	</head>
	<div class="container">
		<h1 class="title outline">Talks</h1>
		<List items={publishedTalks} large />
	</div>
</BaseLayout>

<style>
.container {
	padding-top: var(--grid-gap-y);
	padding-bottom: var(--grid-gap-y);
}

.title {
	font-size: var(--folio-title-size);
	text-transform: uppercase;
	line-height: 0.75em;
	margin-bottom: var(--grid-gap-y);
}

.container >>> img {
	@media (prefers-color-scheme: dark) {
		filter: invert(1) hue-rotate(180deg);
	}
}
</style>
